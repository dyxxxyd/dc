#### session共享
| 方式 | 做法 |
| --- | --- |
| 客户端cookie保存 | 以cookie加密的方式保存在客户端，优点是可以减轻服务器压力，一个session中的两次或者多次请求可以在一个集群的多个服务器上完成，可以避免单点故障。缺点：1. 传递cookie时，http信息头长度限制。2. 需要额外做session信息加密工作。3. 占用额外带宽。4. 用户可以禁用cookie，不是很可靠 |
| 服务期间session同步 | 使用主从服务器架构，当用户在主服务器登录后，通过脚本或守护进程的方式，将session传递到各从服务器，这样用户访问其他服务器时，就可以读取到session信息；缺点：1. 速度慢、不稳定。2. session传递是主从单向，如果主服务器挂了，其他服务器无法获取session。3. 同时对海量访问或密集型访问，可能会出现不同步或重复登录的情况 |
| 使用集群管理session | 提供一个集群保存session共享信息，其他应用把自己的session信息保存到session集群服务器组，当应用系统需要session信息时直接从集群服务器读取。目前大多数都使用Memcache来对session进行存储。优点：1. 开发者不哟个考虑session共享问题，专注于程序开发，像正常使用session就可以。2. 不用开始编写代码，只需要对服务器进行配置即可使用。缺点：如果想改变session策略，必须重新部署每个服务器的servlet容器 |
| 把session持久化到数据库 | 将session信息存入数据库中，其他应用可以从数据库中查出session信息。缺点：1. session的并发读写在数据库中完成，对MySQL的性能要求较高。2. 需要额外实现session淘汰逻辑，即定时从数据库表中更新和删除session信息，增加了工作量 |
| NoSQL | 把session持久化到Redis、MongoDB中很好的解决了MySQL数据库性能的问题 |

#### 从用户在浏览器输入网址并回车，到看到完整的页面，中间经历的过程  
从用户电脑找到最近的DNS服务，然后解析到对应的IP，双方建立HTTP连接，发送请求信息，服务器拿到请求信息准备响应信息，中间要经过Nginx转发到FastCGI（PHP-FPM），然后PHP开始解析框架，解析请求头，找到对应API，该🍵数据库查数据库，该组装HTML组装HTML，然后重新返回给用户，用户拿到返回数据，浏览器开始渲染页面，JS开始加载。